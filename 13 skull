Minería de datos

Proyecto de AsociAsociación

María Camila Preciado

Juan Leonardo Padilla

Apriori

In [47]:
# importing important libraries
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
from sklearn import linear_model  # will be using for plotting trend line
from sklearn.preprocessing import MinMaxScaler # for normalizing data
from sklearn.cluster import KMeans 
%matplotlib inline
In [48]:
!pip install apyori  #This instals the Apyori package for using the Association Mining Apriori algorithm
from apyori import apriori
Requirement already satisfied: apyori in /usr/local/lib/python3.7/dist-packages (1.1.2)
In [49]:
# importar la data
retail= pd.read_csv('Retail.csv', sep=';', engine='python')
retail.head()
Out[49]:
InvoiceNo	Description
0	536384	HEART OF WICKER LARGE
1	536388	5 HOOK HANGER MAGIC TOADSTOOL
2	536408	12 PENCILS TALL TUBE SKULLS
3	536408	10 COLOUR SPACEBOY PEN
4	536409	5 STRAND GLASS NECKLACE CRYSTAL
In [50]:
#colocar todos los productos como uncios
all_products_retail = retail['Description'].unique()
In [51]:
#crear las variables dummys por usuario
one_hot = pd.get_dummies(retail['Description'])
retail.drop('Description', inplace=True, axis=1)
retail = retail.join(one_hot)
retail.head()
Out[51]:
InvoiceNo	4 PURPLE FLOCK DINNER CANDLES	10 COLOUR SPACEBOY PEN	12 COLOURED PARTY BALLOONS	12 DAISY PEGS IN WOOD BOX	12 EGG HOUSE PAINTED WOOD	12 HANGING EGGS HAND PAINTED	12 IVORY ROSE PEG PLACE SETTINGS	12 MESSAGE CARDS WITH ENVELOPES	12 PENCIL SMALL TUBE WOODLAND	12 PENCILS SMALL TUBE RED RETROSPOT	12 PENCILS SMALL TUBE SKULL	12 PENCILS TALL TUBE POSY	12 PENCILS TALL TUBE RED RETROSPOT	12 PENCILS TALL TUBE SKULLS	12 PINK HEN+CHICKS IN BASKET	200 BENDY SKULL STRAWS	200 RED + WHITE BENDY STRAWS	3 BIRDS CANVAS SCREEN	3 HEARTS HANGING DECORATION RUSTIC	3 PINK HEN+CHICKS IN BASKET	3 TRADITIONAl BISCUIT CUTTERS SET	3 WICK CHRISTMAS BRIAR CANDLE	36 DOILIES DOLLY GIRL	36 PENCILS TUBE POSY	4 BLUE DINNER CANDLES SILVER FLOCK	4 BURGUNDY WINE DINNER CANDLES	4 IVORY DINNER CANDLES SILVER FLOCK	4 PEAR BOTANICAL DINNER CANDLES	4 PINK FLOCK CHRISTMAS BALLS	4 SKY BLUE DINNER CANDLES	4 WILDFLOWER BOTANICAL CANDLES	5 HOOK HANGER MAGIC TOADSTOOL	5 STRAND GLASS NECKLACE AMETHYST	5 STRAND GLASS NECKLACE CRYSTAL	50CM METAL STRING WITH 7 CLIPS	6 CHOCOLATE LOVE HEART T-LIGHTS	6 GIFT TAGS 50'S CHRISTMAS	6 GIFT TAGS VINTAGE CHRISTMAS	6 RIBBONS RUSTIC CHARM	...	ASSORTED TUTTI FRUTTI MIRROR	BATHROOM SCALES FOOTPRINTS IN SAND	BIRTHDAY PARTY CORDON BARRIER TAPE	BLACK SWEETHEART BRACELET	BLUE FLOCK CUSHION COVER	BLUE POLKADOT LUGGAGE TAG	BOTANICAL LAVENDER BIRTHDAY CARD	BOTANICAL LAVENDER GIFT WRAP	BOTANICAL LILY GIFT WRAP	BROCANTE SHELF WITH HOOKS	CACTI T-LIGHT CANDLES	CAKE STAND 3 TIER MAGIC GARDEN	CAKE STAND VICTORIAN FILIGREE LARGE	CAKES AND BOWS GIFT TAPE	CALENDAR IN SEASON DESIGN	CAMOUFLAGE DOG COLLAR	CANDLE HOLDER SILVER MADELINE	CANDY SHOP STICKER SHEET	CANDY SPOT BUNNY	CANDY SPOT CUSHION COVER	CARD HOLDER LOVE BIRD SMALL	CARD SUKI BIRTHDAY	CARDHOLDER HOLLY WREATH METAL	CAROUSEL DESIGN WASHBAG	GOLDIE LOOKING MIRROR	GRASS HOPPER WOODEN WALL CLOCK	HANGING BAUBLE T-LIGHT HOLDER LARGE	HANGING BUTTERFLY EGG	HANGING CHICK YELLOW DECORATION	HANGING CHICK GREEN DECORATION	HANGING HEART BASKET	HEART OF WICKER LARGE	IVORY WICKER HEART SMALL	JOY LARGE WOOD LETTERS	JUMBO STORAGE BAG SKULLS	PINK GLASS TASSLE BAG CHARM	PINK HANGING GINGHAM EASTER HEN	WHITE SILVER NECKLACE SHELL GLASS	WHITE SQUARE TABLE CLOCK	WHITE TALL PORCELAIN T-LIGHT HOLDER
0	536384	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	1	0	0	0	0	0	0	0	0
1	536388	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	1	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
2	536408	0	0	0	0	0	0	0	0	0	0	0	0	0	1	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
3	536408	0	1	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
4	536409	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	1	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
5 rows × 89 columns

In [52]:
#se empieza a aplicar los metodos para cambiar los 1 por el nombre de los articulos
retail_change = retail.groupby(["InvoiceNo"])[all_products_retail [:]].apply(sum)
retail_change = retail_change.reset_index()[all_products_retail ]
In [53]:
## funcion para reemplazar de valores distintos de cero con nombres de productos
def get_Names_Retail(x):
    for product in all_products_retail :
        if x[product] > 0:
            x[product] = product
    return x

retail_change = retail_change.apply(get_Names_Retail, axis=1)
retail_change.head()
Out[53]:
HEART OF WICKER LARGE	5 HOOK HANGER MAGIC TOADSTOOL	12 PENCILS TALL TUBE SKULLS	10 COLOUR SPACEBOY PEN	5 STRAND GLASS NECKLACE CRYSTAL	6 RIBBONS RUSTIC CHARM	12 DAISY PEGS IN WOOD BOX	60 CAKE CASES DOLLY GIRL DESIGN	4 IVORY DINNER CANDLES SILVER FLOCK	BLACK SWEETHEART BRACELET	12 MESSAGE CARDS WITH ENVELOPES	CALENDAR IN SEASON DESIGN	JUMBO STORAGE BAG SKULLS	4 PURPLE FLOCK DINNER CANDLES	12 PENCILS SMALL TUBE SKULL	12 PENCIL SMALL TUBE WOODLAND	200 RED + WHITE BENDY STRAWS	CAKES AND BOWS GIFT TAPE	36 DOILIES DOLLY GIRL	PINK GLASS TASSLE BAG CHARM	12 PENCILS SMALL TUBE RED RETROSPOT	CANDY SHOP STICKER SHEET	BIRTHDAY PARTY CORDON BARRIER TAPE	CARDHOLDER HOLLY WREATH METAL	6 CHOCOLATE LOVE HEART T-LIGHTS	ASSORTED TUTTI FRUTTI MIRROR	12 IVORY ROSE PEG PLACE SETTINGS	CAKE STAND VICTORIAN FILIGREE LARGE	CAROUSEL DESIGN WASHBAG	GRASS HOPPER WOODEN WALL CLOCK	JOY LARGE WOOD LETTERS	CACTI T-LIGHT CANDLES	3 TRADITIONAl BISCUIT CUTTERS SET	BROCANTE SHELF WITH HOOKS	12 PENCILS TALL TUBE RED RETROSPOT	200 BENDY SKULL STRAWS	HANGING CHICK YELLOW DECORATION	12 PENCILS TALL TUBE POSY	12 COLOURED PARTY BALLOONS	HANGING BAUBLE T-LIGHT HOLDER LARGE	...	36 PENCILS TUBE POSY	CARD SUKI BIRTHDAY	4 PEAR BOTANICAL DINNER CANDLES	12 EGG HOUSE PAINTED WOOD	AMETHYST DROP EARRINGS W LONG BEADS	4 WILDFLOWER BOTANICAL CANDLES	AMBER GLASS/SILVER BRACELET	4 BURGUNDY WINE DINNER CANDLES	50CM METAL STRING WITH 7 CLIPS	CANDY SPOT CUSHION COVER	HANGING CHICK GREEN DECORATION	4 PINK FLOCK CHRISTMAS BALLS	75 GREEN FAIRY CAKE CASES	BLUE FLOCK CUSHION COVER	WHITE SILVER NECKLACE SHELL GLASS	CAKE STAND 3 TIER MAGIC GARDEN	3 WICK CHRISTMAS BRIAR CANDLE	HANGING HEART BASKET	ACRYLIC JEWEL SNOWFLAKE,PINK	CAMOUFLAGE DOG COLLAR	ACRYLIC GEOMETRIC LAMP	CANDY SPOT BUNNY	WHITE SQUARE TABLE CLOCK	HANGING BUTTERFLY EGG	PINK HANGING GINGHAM EASTER HEN	3 PINK HEN+CHICKS IN BASKET	12 PINK HEN+CHICKS IN BASKET	BOTANICAL LAVENDER GIFT WRAP	ABC TREASURE BOOK BOX	GOLDIE LOOKING MIRROR	BOTANICAL LILY GIFT WRAP	3 BIRDS CANVAS SCREEN	60 GOLD AND SILVER FAIRY CAKE CASES	CANDLE HOLDER SILVER MADELINE	6 GIFT TAGS VINTAGE CHRISTMAS	6 GIFT TAGS 50'S CHRISTMAS	IVORY WICKER HEART SMALL	ACRYLIC JEWEL ICICLE, BLUE	CARD HOLDER LOVE BIRD SMALL	12 HANGING EGGS HAND PAINTED
0	HEART OF WICKER LARGE	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
1	0	5 HOOK HANGER MAGIC TOADSTOOL	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
2	0	0	12 PENCILS TALL TUBE SKULLS	10 COLOUR SPACEBOY PEN	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
3	0	0	0	0	5 STRAND GLASS NECKLACE CRYSTAL	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
4	0	5 HOOK HANGER MAGIC TOADSTOOL	0	0	0	6 RIBBONS RUSTIC CHARM	12 DAISY PEGS IN WOOD BOX	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	...	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
5 rows × 88 columns

In [54]:
## se remueven los valores 0
x = retail_change.values
x = [sub[~(sub == 0)].tolist() for sub in x if sub[sub != 0].tolist()]
retail_list = x
In [55]:
#se aplica el método apriori
rules = apriori(retail_list,min_support=0.0045,min_confidance=0.5,min_lift=3,min_length=2,target="rules")
association_results = list(rules)
In [56]:
#Se imprime cuantas reglas existen
print(len(association_results))
48
In [57]:
#se crean las reglas, el soporte, la confianza y el lift
for item in association_results:

    pair = item[0] 
    items = [x for x in pair]
    print("Regla: " + items[0] + " -> " + items[1])

    print("Soporte: " + str(item[1]))

    print("Confianza: " + str(item[2][0][2]))
    print("Lift: " + str(item[2][0][3]))
    print("=====================================")
Regla: CANDY SPOT CUSHION COVER -> 12 IVORY ROSE PEG PLACE SETTINGS
Soporte: 0.00487313056629138
Confianza: 0.1946308724832215
Lift: 9.192447001171834
=====================================
Regla: CARD SUKI BIRTHDAY -> 12 MESSAGE CARDS WITH ENVELOPES
Soporte: 0.006217442446647623
Confianza: 0.14682539682539683
Lift: 3.012958401751505
=====================================
Regla: 12 PENCILS SMALL TUBE RED RETROSPOT -> 12 PENCIL SMALL TUBE WOODLAND
Soporte: 0.022349185010922534
Confianza: 0.37254901960784315
Lift: 6.057484195864138
=====================================
Regla: 12 PENCILS SMALL TUBE SKULL -> 12 PENCIL SMALL TUBE WOODLAND
Soporte: 0.018316249369853807
Confianza: 0.30532212885154064
Lift: 5.07534075082547
=====================================
Regla: CALENDAR IN SEASON DESIGN -> 12 PENCIL SMALL TUBE WOODLAND
Soporte: 0.005545286506469501
Confianza: 0.09243697478991597
Lift: 5.000840336134454
=====================================
Regla: 12 PENCIL SMALL TUBE WOODLAND -> CARD SUKI BIRTHDAY
Soporte: 0.00974626113258276
Confianza: 0.16246498599439776
Lift: 3.3338935574229693
=====================================
Regla: CARDHOLDER HOLLY WREATH METAL -> 12 PENCIL SMALL TUBE WOODLAND
Soporte: 0.0067215594017812135
Confianza: 0.11204481792717087
Lift: 4.86699789404813
=====================================
Regla: 12 PENCILS SMALL TUBE SKULL -> 12 PENCILS SMALL TUBE RED RETROSPOT
Soporte: 0.02537388674172408
Confianza: 0.412568306010929
Lift: 6.858083768354855
=====================================
Regla: 12 PENCILS TALL TUBE SKULLS -> 12 PENCILS TALL TUBE RED RETROSPOT
Soporte: 0.01949252226516552
Confianza: 0.42804428044280446
Lift: 9.83510236646768
=====================================
Regla: 200 RED + WHITE BENDY STRAWS -> CARD SUKI BIRTHDAY
Soporte: 0.006049403461603092
Confianza: 0.20930232558139533
Lift: 4.295028067361668
=====================================
Regla: CARDHOLDER HOLLY WREATH METAL -> 3 HEARTS HANGING DECORATION RUSTIC
Soporte: 0.00520920853638044
Confianza: 0.09967845659163986
Lift: 4.329828431947802
=====================================
Regla: 60 CAKE CASES DOLLY GIRL DESIGN -> 36 DOILIES DOLLY GIRL
Soporte: 0.0073937153419593345
Confianza: 0.4835164835164835
Lift: 6.509969668340709
=====================================
Regla: 4 PEAR BOTANICAL DINNER CANDLES -> 4 WILDFLOWER BOTANICAL CANDLES
Soporte: 0.004705091581246849
Confianza: 0.20289855072463767
Lift: 13.268673355629877
=====================================
Regla: 4 PEAR BOTANICAL DINNER CANDLES -> CARD SUKI BIRTHDAY
Soporte: 0.004537052596202319
Confianza: 0.1956521739130435
Lift: 4.014917541229385
=====================================
Regla: 4 WILDFLOWER BOTANICAL CANDLES -> CARD SUKI BIRTHDAY
Soporte: 0.005713325491514031
Confianza: 0.37362637362637363
Lift: 7.6670708601743085
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> 6 GIFT TAGS 50'S CHRISTMAS 
Soporte: 0.028230549487481094
Confianza: 0.5169230769230769
Lift: 9.350180032733224
=====================================
Regla: CARDHOLDER HOLLY WREATH METAL -> 6 GIFT TAGS 50'S CHRISTMAS 
Soporte: 0.00520920853638044
Confianza: 0.09538461538461537
Lift: 4.143312745648512
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> CALENDAR IN SEASON DESIGN
Soporte: 0.00504116955133591
Confianza: 0.0911854103343465
Lift: 4.933130699088146
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> CARDHOLDER HOLLY WREATH METAL
Soporte: 0.007057637371870274
Confianza: 0.1276595744680851
Lift: 5.545271004814412
=====================================
Regla: 60 CAKE CASES DOLLY GIRL DESIGN -> CALENDAR IN SEASON DESIGN
Soporte: 0.00504116955133591
Confianza: 0.06787330316742081
Lift: 3.6719457013574655
=====================================
Regla: 60 CAKE CASES DOLLY GIRL DESIGN -> CARDHOLDER HOLLY WREATH METAL
Soporte: 0.005377247521424971
Confianza: 0.07239819004524888
Lift: 3.1448294084618693
=====================================
Regla: BLUE POLKADOT LUGGAGE TAG  -> CANDY SPOT CUSHION COVER
Soporte: 0.00504116955133591
Confianza: 0.375
Lift: 17.711309523809526
=====================================
Regla: BLUE POLKADOT LUGGAGE TAG  -> CARD SUKI BIRTHDAY
Soporte: 0.006385481431692153
Confianza: 0.475
Lift: 9.747327586206897
=====================================
Regla: BOTANICAL LAVENDER BIRTHDAY CARD -> CANDY SPOT CUSHION COVER
Soporte: 0.004705091581246849
Confianza: 0.345679012345679
Lift: 16.326474622770917
=====================================
Regla: BOTANICAL LAVENDER BIRTHDAY CARD -> CARD SUKI BIRTHDAY
Soporte: 0.0075617543270038645
Confianza: 0.5555555555555556
Lift: 11.400383141762452
=====================================
Regla: CANDY SPOT CUSHION COVER -> CAKES AND BOWS GIFT  TAPE
Soporte: 0.00487313056629138
Confianza: 0.31182795698924737
Lift: 14.727683905103262
=====================================
Regla: CAKES AND BOWS GIFT  TAPE -> CARD SUKI BIRTHDAY
Soporte: 0.004705091581246849
Confianza: 0.3010752688172043
Lift: 6.178272154245458
=====================================
Regla: CALENDAR IN SEASON DESIGN -> CARD SUKI BIRTHDAY
Soporte: 0.005881364476558562
Confianza: 0.3181818181818182
Lift: 6.529310344827586
=====================================
Regla: CARDHOLDER HOLLY WREATH METAL -> CALENDAR IN SEASON DESIGN
Soporte: 0.00504116955133591
Confianza: 0.2727272727272727
Lift: 11.846715328467154
=====================================
Regla: CANDY SPOT CUSHION COVER -> CARD SUKI BIRTHDAY
Soporte: 0.012098806923206184
Confianza: 0.5714285714285714
Lift: 11.726108374384236
=====================================
Regla: CARDHOLDER HOLLY WREATH METAL -> CARD SUKI BIRTHDAY
Soporte: 0.005881364476558562
Confianza: 0.1206896551724138
Lift: 5.242511955700982
=====================================
Regla: HANGING CHICK GREEN DECORATION -> CARD SUKI BIRTHDAY
Soporte: 0.004705091581246849
Confianza: 0.09655172413793103
Lift: 4.709666478236291
=====================================
Regla: HANGING CHICK  YELLOW DECORATION -> HANGING CHICK GREEN DECORATION
Soporte: 0.01025037808771635
Confianza: 0.5446428571428572
Lift: 26.56696428571429
=====================================
Regla: 12 PENCILS SMALL TUBE SKULL -> 12 PENCILS SMALL TUBE RED RETROSPOT
Soporte: 0.011762728953117123
Confianza: 0.19607843137254902
Lift: 7.727567848331385
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> 6 GIFT TAGS 50'S CHRISTMAS 
Soporte: 0.005377247521424971
Confianza: 0.0896358543417367
Lift: 3.175136721355209
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> CARDHOLDER HOLLY WREATH METAL
Soporte: 0.004537052596202319
Confianza: 0.07563025210084034
Lift: 10.716086434573832
=====================================
Regla: 60 CAKE CASES DOLLY GIRL DESIGN -> 12 PENCIL SMALL TUBE WOODLAND
Soporte: 0.005377247521424971
Confianza: 0.0896358543417367
Lift: 6.275564343384413
=====================================
Regla: 12 PENCIL SMALL TUBE WOODLAND -> 6 RIBBONS RUSTIC CHARM
Soporte: 0.00520920853638044
Confianza: 0.08683473389355742
Lift: 5.939695418397244
=====================================
Regla: 60 CAKE CASES DOLLY GIRL DESIGN -> CARDHOLDER HOLLY WREATH METAL
Soporte: 0.004537052596202319
Confianza: 0.07563025210084034
Lift: 14.064863445378153
=====================================
Regla: CARDHOLDER HOLLY WREATH METAL -> 12 PENCIL SMALL TUBE WOODLAND
Soporte: 0.004705091581246849
Confianza: 0.0784313725490196
Lift: 13.335574229691876
=====================================
Regla: 12 PENCILS SMALL TUBE SKULL -> 12 PENCILS SMALL TUBE RED RETROSPOT
Soporte: 0.00487313056629138
Confianza: 0.07923497267759563
Lift: 9.245633772634736
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> 6 GIFT TAGS 50'S CHRISTMAS 
Soporte: 0.00520920853638044
Confianza: 0.09538461538461537
Lift: 10.710072568940493
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> CARDHOLDER HOLLY WREATH METAL
Soporte: 0.004537052596202319
Confianza: 0.08307692307692308
Lift: 11.771208791208792
=====================================
Regla: 6 GIFT TAGS VINTAGE CHRISTMAS  -> 6 GIFT TAGS 50'S CHRISTMAS 
Soporte: 0.004537052596202319
Confianza: 0.08307692307692308
Lift: 11.497459749552773
=====================================
Regla: 60 CAKE CASES DOLLY GIRL DESIGN -> 6 RIBBONS RUSTIC CHARM
Soporte: 0.004705091581246849
Confianza: 0.0291363163371488
Lift: 3.1525494276795
=====================================
Regla: CANDY SPOT CUSHION COVER -> 6 RIBBONS RUSTIC CHARM
Soporte: 0.004537052596202319
Confianza: 0.2142857142857143
Lift: 14.657635467980297
=====================================
Regla: HEART OF WICKER LARGE -> 6 RIBBONS RUSTIC CHARM
Soporte: 0.004537052596202319
Confianza: 0.02809573361082206
Lift: 3.215340590730809
=====================================
Regla: JUMBO STORAGE BAG SKULLS -> CANDY SPOT CUSHION COVER
Soporte: 0.00487313056629138
Confianza: 0.23015873015873017
Lift: 19.023258377425044
=====================================
FT-GROWTH

In [58]:
!pip install fpgrowth_py
from fpgrowth_py import fpgrowth
import pandas as pd
Requirement already satisfied: fpgrowth_py in /usr/local/lib/python3.7/dist-packages (1.0.0)
In [59]:
#metodo para aplicar el fp-growth se imprimen los itemset frecuentes y las reglas
freqItemSet, rules = fpgrowth(retail_list, minSupRatio=0.0045, minConf=0.5)
print(freqItemSet[0])
print(rules[0])
{'4 BLUE DINNER CANDLES SILVER FLOCK'}
[{'BOTANICAL LAVENDER BIRTHDAY CARD'}, {'CARD SUKI BIRTHDAY'}, 0.5555555555555556]
In [60]:
#se imprime el tamaño de los itemset frecuentes y las reglas
print(len(freqItemSet))
print(len(rules))
180
30
In [61]:
#for para poder recorrer los items sacar las reglas y el lift
for item in rules:
    print("Regla: ",item[0:2])

    print("Lift: ",item[2])
    print("=====================================")
Regla:  [{'BOTANICAL LAVENDER BIRTHDAY CARD'}, {'CARD SUKI BIRTHDAY'}]
Lift:  0.5555555555555556
=====================================
Regla:  [{'HANGING CHICK  YELLOW DECORATION'}, {'HANGING CHICK GREEN DECORATION'}]
Lift:  0.5446428571428571
=====================================
Regla:  [{'JUMBO STORAGE BAG SKULLS', 'CANDY SPOT CUSHION COVER'}, {'CARD SUKI BIRTHDAY'}]
Lift:  0.7073170731707317
=====================================
Regla:  [{'CANDY SPOT CUSHION COVER', '6 RIBBONS RUSTIC CHARM'}, {'CARD SUKI BIRTHDAY'}]
Lift:  0.5625
=====================================
Regla:  [{'CANDY SPOT CUSHION COVER'}, {'CARD SUKI BIRTHDAY'}]
Lift:  0.5714285714285714
=====================================
Regla:  [{'6 GIFT TAGS VINTAGE CHRISTMAS ', 'CARDHOLDER HOLLY WREATH METAL'}, {"6 GIFT TAGS 50'S CHRISTMAS "}]
Lift:  0.6428571428571429
=====================================
Regla:  [{'CARDHOLDER HOLLY WREATH METAL', "6 GIFT TAGS 50'S CHRISTMAS "}, {'6 GIFT TAGS VINTAGE CHRISTMAS '}]
Lift:  0.8709677419354839
=====================================
Regla:  [{'60 CAKE CASES DOLLY GIRL DESIGN', 'CARDHOLDER HOLLY WREATH METAL'}, {'12 PENCIL SMALL TUBE WOODLAND'}]
Lift:  0.84375
=====================================
Regla:  [{'CARDHOLDER HOLLY WREATH METAL', '12 PENCIL SMALL TUBE WOODLAND'}, {'60 CAKE CASES DOLLY GIRL DESIGN'}]
Lift:  0.675
=====================================
Regla:  [{'CARDHOLDER HOLLY WREATH METAL', '12 PENCIL SMALL TUBE WOODLAND'}, {'CARD SUKI BIRTHDAY'}]
Lift:  0.7
=====================================
Regla:  [{'CARDHOLDER HOLLY WREATH METAL', 'CARD SUKI BIRTHDAY'}, {'12 PENCIL SMALL TUBE WOODLAND'}]
Lift:  0.8
=====================================
Regla:  [{'6 GIFT TAGS VINTAGE CHRISTMAS ', 'CARDHOLDER HOLLY WREATH METAL'}, {'12 PENCIL SMALL TUBE WOODLAND'}]
Lift:  0.6428571428571429
=====================================
Regla:  [{'6 GIFT TAGS VINTAGE CHRISTMAS ', '12 PENCIL SMALL TUBE WOODLAND'}, {'CARDHOLDER HOLLY WREATH METAL'}]
Lift:  0.5625
=====================================
Regla:  [{'CARDHOLDER HOLLY WREATH METAL', '12 PENCIL SMALL TUBE WOODLAND'}, {'6 GIFT TAGS VINTAGE CHRISTMAS '}]
Lift:  0.675
=====================================
Regla:  [{'HEART OF WICKER LARGE', 'CARD SUKI BIRTHDAY'}, {'6 RIBBONS RUSTIC CHARM'}]
Lift:  0.5192307692307693
=====================================
Regla:  [{'60 CAKE CASES DOLLY GIRL DESIGN', 'CARD SUKI BIRTHDAY'}, {'6 RIBBONS RUSTIC CHARM'}]
Lift:  0.509090909090909
=====================================
Regla:  [{'12 PENCIL SMALL TUBE WOODLAND', 'CARD SUKI BIRTHDAY'}, {'6 RIBBONS RUSTIC CHARM'}]
Lift:  0.5344827586206896
=====================================
Regla:  [{'JUMBO STORAGE BAG SKULLS', "6 GIFT TAGS 50'S CHRISTMAS "}, {'6 GIFT TAGS VINTAGE CHRISTMAS '}]
Lift:  0.627906976744186
=====================================
Regla:  [{'JUMBO STORAGE BAG SKULLS', '6 GIFT TAGS VINTAGE CHRISTMAS '}, {"6 GIFT TAGS 50'S CHRISTMAS "}]
Lift:  0.627906976744186
=====================================
Regla:  [{'6 GIFT TAGS VINTAGE CHRISTMAS ', '12 PENCIL SMALL TUBE WOODLAND'}, {"6 GIFT TAGS 50'S CHRISTMAS "}]
Lift:  0.6666666666666666
=====================================
Regla:  [{"6 GIFT TAGS 50'S CHRISTMAS ", '12 PENCIL SMALL TUBE WOODLAND'}, {'6 GIFT TAGS VINTAGE CHRISTMAS '}]
Lift:  0.7441860465116279
=====================================
Regla:  [{'6 GIFT TAGS VINTAGE CHRISTMAS ', '6 RIBBONS RUSTIC CHARM'}, {"6 GIFT TAGS 50'S CHRISTMAS "}]
Lift:  0.5849056603773585
=====================================
Regla:  [{"6 GIFT TAGS 50'S CHRISTMAS ", '6 RIBBONS RUSTIC CHARM'}, {'6 GIFT TAGS VINTAGE CHRISTMAS '}]
Lift:  0.6078431372549019
=====================================
Regla:  [{'6 GIFT TAGS VINTAGE CHRISTMAS '}, {"6 GIFT TAGS 50'S CHRISTMAS "}]
Lift:  0.5106382978723404
=====================================
Regla:  [{"6 GIFT TAGS 50'S CHRISTMAS "}, {'6 GIFT TAGS VINTAGE CHRISTMAS '}]
Lift:  0.5169230769230769
=====================================
Regla:  [{'60 CAKE CASES DOLLY GIRL DESIGN', '12 PENCIL SMALL TUBE WOODLAND'}, {'6 RIBBONS RUSTIC CHARM'}]
Lift:  0.5161290322580645
=====================================
Regla:  [{'12 PENCILS SMALL TUBE SKULL', '12 PENCIL SMALL TUBE WOODLAND'}, {'12 PENCILS SMALL TUBE RED RETROSPOT'}]
Lift:  0.6422018348623854
=====================================
Regla:  [{'12 PENCILS SMALL TUBE RED RETROSPOT', '12 PENCIL SMALL TUBE WOODLAND'}, {'12 PENCILS SMALL TUBE SKULL'}]
Lift:  0.5263157894736842
=====================================
Regla:  [{'12 PENCILS SMALL TUBE SKULL', '6 RIBBONS RUSTIC CHARM'}, {'12 PENCILS SMALL TUBE RED RETROSPOT'}]
Lift:  0.5686274509803921
=====================================
Regla:  [{'12 PENCILS SMALL TUBE RED RETROSPOT', '6 RIBBONS RUSTIC CHARM'}, {'12 PENCILS SMALL TUBE SKULL'}]
Lift:  0.6744186046511628
=====================================
